# What if git operations fail?
```
is-this-ci origin/master  
node:internal/child_process:1120
    result.error = new ErrnoException(result.error, 'spawnSync ' + options.file);
                   ^

<ref *1> Error: spawnSync git ENOBUFS
    at Object.spawnSync (node:internal/child_process:1120:20)
    at spawnSync (node:child_process:869:24)
    at execFileSync (node:child_process:912:15)
    at readLogEntries (file:///Users/steell/dev/is-this-ci/dist/report-generator.js:20:20)
    at generateReport (file:///Users/steell/dev/is-this-ci/dist/report-generator.js:5:21)
    at file:///Users/steell/dev/is-this-ci/dist/cli.js:16:1
    at ModuleJob.run (node:internal/modules/esm/module_job:329:25)
    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:644:26)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
  errno: -55,
  code: 'ENOBUFS',
  syscall: 'spawnSync git',
  path: 'git',
  spawnargs: [
    'log',
    'origin/master',
    '--pretty=format:%H|%an|%ae|%ad|%cd',
    '--date=iso'
  ],
  error: [Circular *1],
  status: null,
  signal: 'SIGTERM',
  output: [
    null,
    Buffer(1048882) [Uint8Array] [
       98, 100,  56,  55,  55,  57,  55, 101,  52,  55,  99, 102,
       53, 102,  52,  50,  50,  50,  51,  48,  51,  51,  52,  56,
       53,  53,  56,  48,  51,  51,  51,  53,  57,  50,  99,  52,
      100,  98,  99,  50, 124,  90, 100, 101, 110, 111,  32,  76,
       97, 100, 111, 118, 105,  99, 124, 122, 100, 101, 110, 111,
       46, 108,  97, 100, 111, 118, 105,  99,  46, 101, 120, 116,
       64, 112, 111, 114, 115,  99, 104, 101, 105, 110, 102, 111,
      114, 109,  97, 116, 105, 107,  46,  99, 111, 109, 124,  50,
       48,  50,  53,  45,
      ... 1048782 more items
    ],
    Buffer(0) [Uint8Array] []
  ],
  pid: 98865,
  stdout: Buffer(1048882) [Uint8Array] [
     98, 100,  56,  55,  55,  57,  55, 101,  52,  55,  99, 102,
     53, 102,  52,  50,  50,  50,  51,  48,  51,  51,  52,  56,
     53,  53,  56,  48,  51,  51,  51,  53,  57,  50,  99,  52,
    100,  98,  99,  50, 124,  90, 100, 101, 110, 111,  32,  76,
     97, 100, 111, 118, 105,  99, 124, 122, 100, 101, 110, 111,
     46, 108,  97, 100, 111, 118, 105,  99,  46, 101, 120, 116,
     64, 112, 111, 114, 115,  99, 104, 101, 105, 110, 102, 111,
    114, 109,  97, 116, 105, 107,  46,  99, 111, 109, 124,  50,
     48,  50,  53,  45,
    ... 1048782 more items
  ],
  stderr: Buffer(0) [Uint8Array] []
}

Node.js v22.17.1
```
This error occurs operating on a huge repository. ```git gc``` did run through successfully, however, that issue persists.
Can you make the analysis pass even though, probably counting issues with the analysis in a seperate new tab, to be able to observe such too?

# chats response
Added a git-log fallback that keeps analysis working when git log exceeds the buffer, and logs the failure in the Issues page. The new acceptance test simulates a tiny max buffer and a fake git log, proving the report still computes correct buckets and surfaces the issue.

Details:

Fallback capture writes git log output to a temp file when the initial buffered read fails; issues are recorded and parsing continues from the file. See src/report-generator.ts.
New ATDD scenario plus DSL/driver support for fake git output and env overrides. See tests/acceptance/git-log-fallback.spec.ts, tests/dsl/ci-report.dsl.ts, tests/driver/report-session.ts.
Added IS_THIS_CI_GIT_MAX_BUFFER support (bytes) to control the initial buffered read; useful for tuning in huge repos. See src/report-generator.ts.
Tests: npm run test

If you want to validate on the large repo:

Run IS_THIS_CI_GIT_MAX_BUFFER=1048576 is-this-ci origin/master to force fallback and check the Issues tab.
Run a normal is-this-ci origin/master and confirm the report still completes without errors.
5 files changed
+213
-20
Undo

Review
report-generator.ts
+104
-16
git-log-fallback.spec.ts
+25
-0
report-layout.spec.ts
+4
-2
report-session.ts
+56
-2
ci-report.dsl.ts
+24
-0
